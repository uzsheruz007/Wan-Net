{% extends 'ctf/base_ctf.html' %}

{% block title %}Reyting{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 40px; color: var(--text-main);">LEADERBOARD</h1>

<div class="challenge-card" style="padding: 0; overflow: hidden;">
    <table class="leaderboard-table">
        <thead>
            <tr>
                <th width="100">O'RIN</th>
                <th>XAKER</th>
                <th width="150" style="text-align: right;">BALL</th>
                <th width="200" style="text-align: right;">OXIRGI YECHIM</th>
            </tr>
        </thead>
        <tbody>
            {% for profile in profiles %}
            <tr>
                <td>
                    {% if forloop.counter == 1 %}<i class="fas fa-crown rank-1"></i>
                    {% elif forloop.counter == 2 %}<i class="fas fa-medal rank-2"></i>
                    {% elif forloop.counter == 3 %}<i class="fas fa-medal rank-3"></i>
                    {% else %}#{{ forloop.counter }}{% endif %}
                </td>
                <td style="font-weight: bold; color: #fff;">
                    {{ profile.user.username }}
                    {% if user == profile.user %} <span
                        style="font-size: 0.8rem; color: var(--primary); margin-left: 10px;">(YOU)</span>{% endif %}
                </td>
                <td style="text-align: right; color: var(--secondary); font-weight: bold;">
                    {{ profile.total_points }}
                </td>
                <td style="text-align: right; color: var(--text-muted); font-size: 0.9rem;">
                    {{ profile.last_solved|date:"d M Y, H:i" }}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; color: var(--text-muted); padding: 30px;">
                    Hozircha reyting bo'sh.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}